{% extends 'news_collector/base.html' %}

{% block content %}
<div class="container my-5" style="max-width: 800px;">
    <h1 class="mb-4 text-center">キーワード管理</h1>
    
    <div class="card mb-5 shadow-sm border-primary">
        <div class="card-body p-4">
            <h5 class="card-title mb-3"><i class="fa-solid fa-plus-circle me-2"></i>新しいキーワードを追加</h5>
            <form method="post">
                {% csrf_token %}
                <div class="input-group input-group-lg">
                    {{ form.word }} 
                    <button type="submit" class="btn btn-primary px-4">登録する</button>
                </div>
                {% if form.word.errors %}
                    <div class="text-danger mt-2 small">
                        {{ form.word.errors }}
                    </div>
                {% endif %}
            </form>
        </div>
    </div>

    <div class="card shadow-sm">
        <div class="card-header bg-white py-3">
            <h5 class="mb-0"><i class="fa-solid fa-list me-2"></i>現在の登録状況（削除もこちら）</h5>
        </div>
        <div class="card-body">
            {% if keywords %}
                <div class="table-responsive">
                    <table class="table table-hover align-middle">
                        <thead class="table-light">
                            <tr>
                                <th>キーワード</th>
                                <th>登録日時</th>
                                <th class="text-center">操作</th>
                            </tr>
                        </thead>
                        <tbody>
                            {% for k in keywords %}
                            <tr>
                                <td><span class="badge bg-light text-dark border p-2"># {{ k.word }}</span></td>
                                <td class="small text-muted">{{ k.registered_at|date:"n/j H:i" }}</td>
                                <td class="text-center">
                                    <a href="{% url 'news_collector:delete_keyword' k.pk %}" 
                                       class="btn btn-sm btn-outline-danger"
                                       onclick="return confirm('「{{ k.word }}」を削除してよろしいですか？')">
                                        <i class="fa-solid fa-trash me-1"></i> 削除
                                    </a>
                                </td>
                            </tr>
                            {% endfor %}
                        </tbody>
                    </table>
                </div>
            {% else %}
                <div class="text-center py-4">
                    <p class="text-muted mb-0">まだキーワードが登録されていません。</p>
                </div>
            {% endif %}
        </div>
    </div>

    <div class="mt-4 text-center">
        <a href="{% url 'news_collector:index' %}" class="btn btn-link text-secondary">
            <i class="fa-solid fa-arrow-left me-1"></i> トップページに戻る
        </a>
    </div>
</div>
{% endblock %}